<?xml version="1.0"?>
<config>
  <modules>
    <Belco_Widget>
      <version>0.1.0</version>
    </Belco_Widget>
  </modules>
  <global>
    <helpers>
      <belco>
        <class>Belco_Widget_Helper</class>
      </belco>
    </helpers>
    <blocks>
      <belco>
        <class>Belco_Widget_Block</class>
      </belco>
    </blocks>
    <models>
      <belco>
        <class>Belco_Widget_Model</class>
        <resourceModel>belco_resource</resourceModel>
      </belco>
      <belco_resource>
        <class>Belco_Widget_Model_Resource</class>
        <entities>
          <queue>
            <table>belco_widget_queue</table>
          </queue>
        </entities>
      </belco_resource>
    </models>
    <resources>
      <belco_widget_setup>
        <setup>
          <module>Belco_Widget</module>
          <class>Mage_Core_Model_Resource_Setup</class>
        </setup>
      </belco_widget_setup>
    </resources>
    <events>
      <customer_save_after>
        <observers>
          <customer_save_after_handler>
            <type>singleton</type>
            <class>belco/observer</class>
            <method>customerHook</method>
            <args/>
          </customer_save_after_handler>
        </observers>
      </customer_save_after>
      <sales_order_place_after>
        <observers>
          <sales_order_place_after_handler>
            <type>singleton</type>
            <class>belco/observer</class>
            <method>orderPlacedHook</method>
            <args/>
          </sales_order_place_after_handler>
        </observers>
      </sales_order_place_after>
      <sales_order_save_after>
        <observers>
          <sales_order_save_after_handler>
            <type>model</type>
            <class>belco/observer</class>
            <method>orderStatusChanceHook</method>
            <args/>
          </sales_order_save_after_handler>
        </observers>
      </sales_order_save_after>
      <admin_system_config_changed_section_belco_settings>
        <observers>
          <widget>
            <type>singleton</type>
            <class>belco/observer</class>
            <method>systemConfigChangedHook</method>
            <args/>
          </widget>
        </observers>
      </admin_system_config_changed_section_belco_settings>
    </events>
  </global>
  <crontab>
    <jobs>
      <belco_widget_queue_cron>
        <schedule><cron_expr>*/5 * * * *</cron_expr></schedule>
        <run><model>belco/cron::processQueue</model></run>
      </belco_widget_queue_cron>
    </jobs>
  </crontab>
  <adminhtml>
    <acl>
      <resources>
        <admin>
          <children>
            <system>
              <children>
                <config>
                  <children>                    
                    <belco_settings translate="title" module="belco">
                      <title>Settings</title>
                    </belco_settings>
                  </children>
                </config>
              </children>
            </system>
          </children>
        </admin>
      </resources>
    </acl>
  </adminhtml>
  <frontend>
    <layout>
      <updates>
        <belco module="belco">
          <file>belco.xml</file>
        </belco>
      </updates>
    </layout>
  </frontend>
  <default>
    <belco_settings>
      <general>
        <shop_id/>
        <api_secret/>
        <api_url>https://api.belco.io/</api_url>
      </general>
    </belco_settings>
  </default>
</config>
